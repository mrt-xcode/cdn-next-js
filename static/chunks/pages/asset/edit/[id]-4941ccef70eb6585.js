(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2009],{36864:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset/edit/[id]",function(){return a(57360)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return P},HO:function(){return T},I7:function(){return w},Ko:function(){return D},L5:function(){return v},OD:function(){return b},OU:function(){return Z},V2:function(){return l},XH:function(){return m},Yq:function(){return g},cF:function(){return c},fu:function(){return p},jP:function(){return u},jq:function(){return S},ps:function(){return x},sW:function(){return _},sx:function(){return f},vq:function(){return k}});var n=a(23404),s=a(84105),i=a(17594),r=a(64187);let{confirm:o}=r.Z,d=()=>{},l=async e=>{await (0,n.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message)})},c=async(e,t,a,s,r,o)=>{o(!0),await (0,n.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{r(),(0,i.tA)(e.data.status,e.data.message),s()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{o(!1)})},u=async(e,t,a,s,r)=>{s(!0),await (0,n.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,i.tA)(e.data.status,e.data.message),r.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{s(!1)})},m=async(e,t,a,s,r,o,d)=>{await (0,n.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{r(!0),(0,i.tA)(e.data.status,e.data.message),o({}),a({}),s(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{d()})},p=(e,t,a)=>{d(o({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){h(e,t,a)},onCancel(){}}))},h=async(e,t,a)=>{await n.Z.delete(t+"/"+e).then(e=>{(0,i.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,i.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},g=(e,t,a,n,s,i)=>{d(o({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){y(e,t,a,n,s,i)},onCancel(){}}))},y=async(e,t,a,s,r,o)=>{await n.Z.delete(t+"/"+e).then(e=>{(0,i.lt)(e.data.status,e.data.message),s(!1),r(!0),o({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,i.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},f=async function(e,t,a,s,i){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,n.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:r}}).then(e=>{s(e.data.data),i(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},_=async(e,t)=>{await (0,n.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message)})},w=async(e,t,a)=>{a(!1),await (0,n.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},T=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},x=async(e,t)=>{await (0,n.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,i.lt)(t.response.statusText,t.response.data.message)})},S=async(e,t,a)=>{a(!0);let s=e.pathname.split("/"),i="/"+s[1]+"/"+s[2];await (0,n.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=i?i:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},b=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var n=s.ij(a,{type:"array",cellText:!1,cellDates:!0}),i=s.P6.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1}).filter(e=>!!e[0]);i.splice(0,2),t(i)},a.readAsArrayBuffer(e)},v=async(e,t,a,s,r)=>{s(!0),await n.Z.post(e,{rows:t}).then(e=>{(0,i.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,i.lt)(e.response.statusText,e.response.data.message),s(!1)}).finally(()=>{document.getElementById(r).value=""})},k=async(e,t)=>{await n.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click(),n.remove()})},A=e=>new Promise((t,a)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>a(e)}),Z=async(e,t,a)=>{await A(e).then(t=>{let n=e.name,s="data:"+e.type+";base64,",i=t.replaceAll(s,""),r=e.type;a(n,s,i,r)}),document.getElementById(t).value=""},D=(e,t,a,n)=>{t(!0),A(e).then(s=>{let i="data:"+e.type+";base64,",r=s.replaceAll(i,""),o=e.name;n(o,s,i,r),t(!1),document.getElementById(a).value=""})},P=async function(e,t,a,s,i,r,o,d){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,n.Z)({method:"GET",url:t,params:{page:o+1,keyword:a.keyword,per_page:a.pageSize,id:l}}).then(e=>{let t=r.concat(e.data.data);s(t),i(e.data.meta.total),d(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},57360:function(e,t,a){"use strict";a.r(t);var n=a(85893),s=a(67294),i=a(11163),r=a(18429),o=a(60219),d=a(49053),l=a(71230),c=a(15746),u=a(17360),m=a(71577),p=a(17594),h=a(23404),g=a(44320);let{TabPane:y}=d.Z,f=()=>{(0,s.useEffect)(()=>{eu(),eZ()},[]);let e=(0,i.useRouter)(),[t,a]=(0,s.useState)({dataDepartement:[]}),[f,_]=(0,s.useState)({dataLocation:[]}),[w,T]=(0,s.useState)({dataBranch:[]}),[x,S]=(0,s.useState)({dataStatus:[]}),[b,v]=(0,s.useState)({dataAssetType:[]}),[k,A]=(0,s.useState)({dataCodeActiva:[]}),[Z,D]=(0,s.useState)({dataAnggaran:[]}),[P,j]=(0,s.useState)({dataOwnership:[]}),[E,C]=(0,s.useState)(!1),[I,B]=(0,s.useState)(!1),[F,O]=(0,s.useState)(""),[L,U]=(0,s.useState)(""),[R,N]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1),[X,H]=(0,s.useState)(""),[K,Y]=(0,s.useState)(!1),[z,V]=(0,s.useState)(),[W,J]=(0,s.useState)(),[M,Q]=(0,s.useState)(),[$,ee]=(0,s.useState)(),[et,ea]=(0,s.useState)(),[en,es]=(0,s.useState)("Choose File..."),[ei,er]=(0,s.useState)("Choose File..."),[eo,ed]=(0,s.useState)("Choose File..."),[el,ec]=(0,s.useState)({id:"",tag_number:"",old_number:"",name:"",asset_category_id:"",trademark:"",merek_barang:"",model:"",color:"",serial_number:"",part_number:"",anggaran_id:"",qty:"",invoice_number:"",value:"",lifetime:"",year:"",location_id:"",unit_id:"",uselife:"",type:"",vendor_id:"",status_id:"",branch_id:"",remark:"",picture:"",no_barang:"",flag:"",asset_type_id:"",code_activa_id:"",ownership_id:"",file_name_satu:"",file_description_satu:"",file_name_dua:"",file_description_dua:"",file_name_tiga:"",file_description_tiga:"",tgl_perolehan:"",payment_voucher:"",harga_perolehan:"",currency_perolehan:""}),eu=async()=>{await h.Z.get("api/list-master").then(e=>{a({...t,dataDepartement:e.data.vendorList}),S({...x,dataStatus:e.data.statusList}),_({...f,dataLocation:e.data.location}),T({...w,dataBranch:e.data.branchList}),v({...b,dataAssetType:e.data.assetType}),A({...k,dataCodeActiva:e.data.codeActiva}),j({...P,dataOwnership:e.data.ownership}),D({...Z,dataAnggaran:e.data.anggaran})})},em=e=>{let t={...el};t[e.target.id]=e.target.value,ec(t)},ep=(e,t)=>{ec({...el,uselife:t})},eh=(e,t)=>{ec({...el,tgl_perolehan:t})},eg=e=>{let{target:{value:t}}=e;ec({...el,remark:t})},ey=e=>{let{target:{value:t}}=e;ec({...el,file_description_satu:t})},ef=e=>{let{target:{value:t}}=e;ec({...el,file_description_dua:t})},e_=e=>{let{target:{value:t}}=e;ec({...el,file_description_tiga:t})},ew=()=>{let e=document.getElementById("select-image");e.click()},eT=()=>{let e=document.getElementById("select-image-2");e.click()},ex=e=>new Promise((t,a)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>a(e)}),eS=e=>{q(!0),ex(e).then(t=>{let a="data:"+e.type+";base64,",n=t.replaceAll(a,"");void 0==z?ec({...el,imageSatu:{name:e.name,path:t,type:a,base64:n}}):ec({...el,imageSatu:{id:z,name:e.name,path:t,type:a,base64:n}}),O(t),N(!0),q(!1),setTimeout(()=>{document.getElementById("select-image").value=""},1e3)})},eb=e=>{Y(!0),ex(e).then(t=>{let a="data:"+e.type+";base64,",n=t.replaceAll(a,"");void 0==W?ec({...el,imageDua:{name:e.name,path:t,type:a,base64:n}}):ec({...el,imageDua:{id:W,name:e.name,path:t,type:a,base64:n}}),H(t),B(!0),Y(!1),setTimeout(()=>{document.getElementById("select-image-2").value=""},1e3)})},ev=async e=>{ex(e).then(t=>{let a=e.name,n="data:"+e.type+";base64,",s=t.replaceAll(n,""),i=e.type;es(a),void 0==M?ec({...el,attachments1:{name:a,type:n,base64:s,mime:i}}):ec({...el,attachments1:{id:M,name:a,type:n,base64:s,mime:i}})})},ek=async e=>{ex(e).then(t=>{let a=e.name,n="data:"+e.type+";base64,",s=t.replaceAll(n,""),i=e.type;er(a),void 0==$?ec({...el,attachments2:{name:a,type:n,base64:s,mime:i}}):ec({...el,attachments2:{id:$,name:a,type:n,base64:s,mime:i}})})},eA=async e=>{ex(e).then(t=>{let a=e.name,n="data:"+e.type+";base64,",s=t.replaceAll(n,""),i=e.type;ed(a),void 0==et?ec({...el,attachments3:{name:a,type:n,base64:s,mime:i}}):ec({...el,attachments3:{id:et,name:a,type:n,base64:s,mime:i}})})},eZ=async()=>{await h.Z.get("api/detail-update/"+e.query.id).then(e=>{ec(e.data),null!=e.data.attachments1&&(es(e.data.attachments1.name),Q(e.data.attachments1.id)),null!=e.data.attachments2&&(er(e.data.attachments2.name),ee(e.data.attachments2.id)),null!=e.data.attachments3&&(ed(e.data.attachments3.name),ea(e.data.attachments3.id)),null!=e.data.imageSatu&&(V(e.data.imageSatu.id),O(e.data.imageSatu.ext+e.data.imageSatu.file),N(!0)),null!=e.data.imageDua&&(J(e.data.imageDua.id),H(e.data.imageDua.ext+e.data.imageDua.file),B(!0))}).catch(t=>{"statusText"in t.response&&"message"in t.response.data&&(0,p.lt)(t.response.statusText,t.response.data.message),e.push("/asset")})},eD=()=>{let e=document.getElementById("attachments-1");e.click()},eP=()=>{let e=document.getElementById("attachments-2");e.click()},ej=()=>{let e=document.getElementById("attachments-3");e.click()};return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(p.HU,{title:"Edit Asset"}),(0,n.jsx)(c.Z,{span:24,children:(0,n.jsxs)(u.Z,{cover:(0,n.jsx)(c.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,n.jsx)(p.Xl,{}),(0,n.jsxs)(d.Z,{defaultActiveKey:"1",children:[(0,n.jsx)(y,{tab:"Data",children:(0,n.jsx)(p.lI,{forms:el,handleChange:em,listAssetType:b,onAssetType:function(e){ec({...el,asset_type_id:e})},error:L,onBranch:function(e){ec({...el,branch_id:e})},listBranch:w,onChangeDate:ep,onLocation:function(e){ec({...el,location_id:e})},listLocation:f,onDepartement:function(e){ec({...el,vendor_id:e})},departement:t,onStatus:function(e){ec({...el,status_id:e})},listStatus:x,onRemark:eg,listCodeActiva:k,onCodeActiva:function(e){ec({...el,code_activa_id:e})},listOwnership:P,onOwnersip:function(e){ec({...el,ownership_id:e})},onCurrency:function(e){ec({...el,currency_perolehan:e})},onActiva:function(e){ec({...el,status_activa:e})},listAnggaran:Z,onAnggaran:function(e){ec({...el,anggaran_id:e})},onFlag:function(e){ec({...el,flag:e})},onChangeDatePerolehan:eh})},"1"),(0,n.jsx)(y,{tab:"Photos",children:(0,n.jsx)(p.pK,{image:R,handlePickImage:ew,imageUrl:F,loading:G,isImageDua:I,handlePickImage2:eT,imageUrlDua:X,loadingDua:K,onPickImage:eS,onPickImage2:eb})},"2"),(0,n.jsx)(y,{tab:"Attachments",children:(0,n.jsx)(p.ar,{onPickFile1:ev,onPickFile2:ek,onPickFile3:eA,forms:el,handleChange:em,onDescriptionSatu:ey,onDescriptionDua:ef,onDescriptionTiga:e_,fileName1:en,fileName2:ei,fileName3:eo,handlePickFileSatu:eD,handlePickFileDua:eP,handlePickFileTiga:ej})},"3")]}),(0,n.jsx)(l.Z,{style:{float:"right"},gutter:5,children:(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(m.ZP,{icon:(0,n.jsx)(r.Z,{}),style:{backgroundColor:"#F0AD4E",color:"#fff",marginRight:15},onClick:()=>e.push("/asset"),disabled:E,children:"Cancel"}),(0,n.jsx)(m.ZP,{icon:(0,n.jsx)(o.Z,{}),type:"primary",onClick:()=>(0,g.jP)("api/asset",el,U,C,e),children:"Save"})]})})]})})]})};t.default=f},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,1577,9329,8571,6447,4187,1003,9618,9774,2888,179],function(){return e(e.s=36864)}),_N_E=e.O()}]);