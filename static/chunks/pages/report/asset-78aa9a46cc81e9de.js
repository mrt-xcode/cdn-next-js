(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{92114:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report/asset",function(){return t(76018)}])},44320:function(e,a,t){"use strict";t.d(a,{AD:function(){return A},HO:function(){return S},I7:function(){return x},Ko:function(){return K},L5:function(){return v},OD:function(){return k},OU:function(){return I},V2:function(){return o},XH:function(){return h},Yq:function(){return y},cF:function(){return c},fu:function(){return p},jP:function(){return u},jq:function(){return b},ps:function(){return w},sW:function(){return f},sx:function(){return _},vq:function(){return T}});var n=t(23404),s=t(84105),r=t(17594),i=t(64187);let{confirm:l}=i.Z,d=()=>{},o=async e=>{await (0,n.Z)({method:"GET",url:"api/sidebar"}).then(a=>{e(a.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},c=async(e,a,t,s,i,l)=>{l(!0),await (0,n.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{i(),(0,r.tA)(e.data.status,e.data.message),s()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{l(!1)})},u=async(e,a,t,s,i)=>{s(!0),await (0,n.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{(0,r.tA)(e.data.status,e.data.message),i.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{s(!1)})},h=async(e,a,t,s,i,l,d)=>{await (0,n.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{i(!0),(0,r.tA)(e.data.status,e.data.message),l({}),t({}),s(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{d()})},p=(e,a,t)=>{d(l({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){g(e,a,t)},onCancel(){}}))},g=async(e,a,t)=>{await n.Z.delete(a+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let a="statusText"in e.response,t="message"in e.response.data;a&&t&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t()})},y=(e,a,t,n,s,r)=>{d(l({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){m(e,a,t,n,s,r)},onCancel(){}}))},m=async(e,a,t,s,i,l)=>{await n.Z.delete(a+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),s(!1),i(!0),l({})}).catch(e=>{let a="statusText"in e.response,t="message"in e.response.data;a&&t&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t()})},_=async function(e,a,t,s,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,n.Z)({method:"GET",url:a,params:{page:t.current_page,keyword:t.keyword,per_page:t.pageSize,id:i}}).then(e=>{s(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},f=async(e,a)=>{await (0,n.Z)({method:"GET",url:e}).then(e=>{a(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},x=async(e,a,t)=>{t(!1),await (0,n.Z)({method:"GET",url:e}).then(e=>{a(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t(!0)})},S=(e,a,t)=>{t({...a,[e.target.id]:e.target.value})},w=async(e,a)=>{await (0,n.Z)({method:"get",url:"api/me"}).then(e=>{a(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),"statusText"in a.response&&"message"in a.response.data&&(0,r.lt)(a.response.statusText,a.response.data.message)})},b=async(e,a,t)=>{t(!0);let s=e.pathname.split("/"),r="/"+s[1]+"/"+s[2];await (0,n.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{a(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),a({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{t(!1)})},k=(e,a)=>{var t=new FileReader;t.onload=e=>{var t=e.target.result;t=new Uint8Array(t);var n=s.ij(t,{type:"array",cellText:!1,cellDates:!0}),r=s.P6.sheet_to_json(n.Sheets[n.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),a(r)},t.readAsArrayBuffer(e)},v=async(e,a,t,s,i)=>{s(!0),await n.Z.post(e,{rows:a}).then(e=>{(0,r.tA)(e.data.status,e.data.message),t()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),s(!1)}).finally(()=>{document.getElementById(i).value=""})},T=async(e,a)=>{await n.Z.get(e,{responseType:"blob"}).then(e=>{let t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click(),n.remove()})},z=e=>new Promise((a,t)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>a(n.result),n.onerror=e=>t(e)}),I=async(e,a,t)=>{await z(e).then(a=>{let n=e.name,s="data:"+e.type+";base64,",r=a.replaceAll(s,""),i=e.type;t(n,s,r,i)}),document.getElementById(a).value=""},K=(e,a,t,n)=>{a(!0),z(e).then(s=>{let r="data:"+e.type+";base64,",i=s.replaceAll(r,""),l=e.name;n(l,s,r,i),a(!1),document.getElementById(t).value=""})},A=async function(e,a,t,s,r,i,l,d){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,n.Z)({method:"GET",url:a,params:{page:l+1,keyword:t.keyword,per_page:t.pageSize,id:o}}).then(e=>{let a=i.concat(e.data.data);s(a),r(e.data.meta.total),d(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},76018:function(e,a,t){"use strict";t.r(a);var n=t(85893),s=t(23404),r=t(17594),i=t(44320),l=t(71230),d=t(15746),o=t(17360),c=t(41664),u=t.n(c),h=t(11163),p=t(67294),g=t(84105),y=t(91819),m=t(18159),_=t.n(m),f=t(9473),x=t(1696);let S=()=>{let e=new Date,a=(0,f.I0)(),t=e.getDate(),c=e.getMonth()+1,m=e.getFullYear(),S="".concat(t,"-").concat(c,"-").concat(m),{assetStatusList:w}=(0,f.v9)(e=>e.assetStatusList),{branchList:b}=(0,f.v9)(e=>e.branchList),{departmentList:k}=(0,f.v9)(e=>e.departmentList),{locationList:v}=(0,f.v9)(e=>e.locationList),T=(0,h.useRouter)(),[z,I]=(0,p.useState)(0),[K,A]=(0,p.useState)(!1),[P,W]=(0,p.useState)(!1),[D,Z]=(0,p.useState)([]),[E,N]=(0,p.useState)(!1),[j,C]=(0,p.useState)({viewAny:!0,view:!0,create:!0,update:!0,delete:!0}),[B,O]=(0,p.useState)({pageSize:15,current_page:1,keyword:""}),[R,L]=(0,p.useState)({start:"",end:"",branch:"",location:"",status:"",vendor:""});(0,p.useEffect)(()=>{(0,i.jq)(T,C,N),U()},[]),(0,p.useEffect)(()=>{P&&J()},[B]);let U=async()=>{await s.Z.get("api/list-master").then(e=>{a((0,x.ih)(e.data.vendorList)),a((0,x.lu)(e.data.statusList)),a((0,x.KR)(e.data.branchList)),a((0,x.qb)(e.data.location))})},M=(e,a)=>{O({...B,pageSize:a,current_page:e})},F=(e,a)=>{L({...R,start:a})},G=(e,a)=>{L({...R,end:a})},H=e=>{L({...R,branch:e})},q=e=>{L({...R,location:e})},Y=e=>{L({...R,vendor:e})},V=e=>{L({...R,status:e})},X=()=>{L({...R,start:"",end:"",branch:"",status:"",vendor:"",location:""}),O({pageSize:15,current_page:1,keyword:""}),J(),U()},J=async()=>{A(!0);let e={location_id:R.location,status_id:R.status,branch_id:R.branch,vendor_id:R.vendor,startDate:R.start,endDate:R.end,page:B.current_page,keyword:R.keyword,per_page:B.pageSize};await s.Z.get("api/report/asset",{params:e}).then(e=>{W(!0),A(!1),Z(e.data.data),I(e.data.meta.total)})},Q=async()=>{let e={location_id:R.location,status_id:R.status,branch_id:R.branch,vendor_id:R.vendor,startDate:R.start,endDate:R.end};await s.Z.get("api/report/asset/excel",{params:e}).then(e=>{let a=e.data,t=g.P6.json_to_sheet(a);for(var n=g.P6.decode_col("L"),s=g.P6.decode_col("Q"),r=g.P6.decode_range(t["!ref"]),i=r.s.r+1;i<=r.e.r;++i){var l=g.P6.encode_cell({r:i,c:n}),d=g.P6.encode_cell({r:i,c:s});t[l].t="d",t[d].t="n",t[d].z="0,000.00"}let o=g.P6.book_new();g.P6.book_append_sheet(o,t,"Sheet1"),g.NC(o,"Report-Asset "+S+".xlsx")})},$=async()=>{let e={location_id:R.location,status_id:R.status,branch_id:R.branch,vendor_id:R.departement,startDate:R.start,endDate:R.end};await s.Z.get("api/report/asset/pdf",{params:e}).then(e=>{ee(e.data)})},ee=async e=>{let a=new y.default("landscape","px","a4","false"),t="Asset Register",n=a.internal.pageSize.width/2-a.getStringUnitWidth(t)*a.internal.getFontSize()/2;a.text(t,n,20),_()(a,{styles:{fontSize:5},margin:{right:5,left:5},columnStyles:{number:{cellWidth:15,fontSize:3.8},tag_number:{cellWidth:25,fontSize:3.8},no_induk_barang:{cellWidth:20,fontSize:3.8},no_barang:{cellWidth:20,fontSize:3.8},old_number:{cellWidth:20,fontSize:3.8},name:{cellWidth:50,fontSize:3.8},branch:{cellWidth:20,fontSize:3.8},vendor:{cellWidth:30,fontSize:3.8},code_activa:{cellWidth:25,fontSize:3.8},location:{cellWidth:25,fontSize:3.8},tgl_perolehan:{cellWidth:25,fontSize:3.8},asset_type:{cellWidth:25,fontSize:3.8},payment_voucher:{cellWidth:25,fontSize:3.8},merek_barang:{cellWidth:25,fontSize:3.8},model:{cellWidth:25,fontSize:3.8},currency:{cellWidth:20,fontSize:3.8},currency_perolehan:{cellWidth:25,fontSize:3.8},serial_number:{cellWidth:25,fontSize:3.8},anggaran_asset:{cellWidth:20,fontSize:3.8},masa_manfaat:{cellWidth:25,fontSize:3.8},flag:{cellWidth:25,fontSize:3.8},status_activa:{cellWidth:25,fontSize:3.8},remark:{cellWidth:20,fontSize:3.8},status:{cellWidth:25,fontSize:3.8},date:{cellWidth:25,fontSize:3.8}},body:e,columns:[{header:"#",dataKey:"number"},{header:"Barcode",dataKey:"tag_number"},{header:"No. Induk Barang",dataKey:"no_induk_barang"},{header:"AMS NO",dataKey:"no_barang"},{header:"REINS NO",dataKey:"old_number"},{header:"Name",dataKey:"name"},{header:"Branch",dataKey:"branch"},{header:"Departement",dataKey:"vendor"},{header:"Code Activa",dataKey:"code_activa"},{header:"Location",dataKey:"location"},{header:"Tgl. Perolehan",dataKey:"tgl_perolehan"},{header:"Jenis Barang",dataKey:"asset_type"},{header:"Payment Voucher",dataKey:"payment_voucher"},{header:"Merk",dataKey:"merek_barang"},{header:"Model",dataKey:"model"},{header:"Harga Perolehan",dataKey:"currency"},{header:"Currency Perolehan",dataKey:"currency_perolehan"},{header:"S/N",dataKey:"serial_number"},{header:"Anggaran Asset",dataKey:"anggaran_asset"},{header:"Masa Manfaat",dataKey:"masa_manfaat"},{header:"Flag",dataKey:"flag"},{header:"Status Activa",dataKey:"status_activa"},{header:"Remark",dataKey:"remark"},{header:"Kondisi Barang",dataKey:"status"},{header:"Created",dataKey:"date"}]}),a.save("Report Asset "+S+".pdf")};return E?(0,n.jsx)(r.Kg,{}):j.viewAny?(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(r.HU,{}),(0,n.jsx)(d.Z,{span:24,children:(0,n.jsxs)(o.Z,{cover:(0,n.jsx)(d.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,n.jsx)(l.Z,{children:(0,n.jsx)(r.Xl,{})}),(0,n.jsx)(l.Z,{style:{width:"100%"},children:(0,n.jsx)(d.Z,{span:24,children:(0,n.jsx)(r.E9,{onChangeStartDate:F,onChangeEndDate:G,forms:R,location:v,vendor:k,status:w,branch:b,onChangeBranch:H,onChangeLocation:q,onChangeStatus:V,onChangeVendor:Y,handleGetData:J,handleDownloadExcel:Q,handleDownloadPDF:$,handleReset:X})})}),(0,n.jsx)(r.zo,{columns:[{title:"Barcode",dataIndex:"tag_number",key:"tag_number",align:"center",ellipsis:!0},{title:"No Induk Barang",dataIndex:"no_induk_barang",key:"no_induk_barang",align:"center",ellipsis:!0},{title:"AMS NO",dataIndex:"no_barang",key:"no_barang",align:"center",ellipsis:!0},{title:"REINS NO",dataIndex:"old_number",key:"old_number",align:"center",ellipsis:!0},{title:"Name",key:"name",width:350,align:"center",ellipsis:!0,render:e=>(0,n.jsx)(u(),{style:{color:"#1890ff"},href:"asset/"+JSON.stringify(e.id),children:e.name})},{title:"Branch",key:"branch",dataIndex:"branch",align:"center",ellipsis:!0},{title:"Departement",key:"vendor",dataIndex:"vendor",align:"center",ellipsis:!0},{title:"Ownership",key:"ownership",dataIndex:"ownership",align:"center",ellipsis:!0},{title:"Code Activa",key:"code_activa",dataIndex:"code_activa",align:"center",ellipsis:!0},{title:"Location",align:"center",key:"location",dataIndex:"location",ellipsis:!0},{title:"Tanggal Perolehan",dataIndex:"tgl_perolehan",key:"tgl_perolehan",align:"center",ellipsis:!0},{title:"Jenis Barang",key:"asset_type",dataIndex:"asset_type",align:"center",ellipsis:!0},{title:"Payment Voucher",key:"payment_voucher",dataIndex:"payment_voucher",align:"center",ellipsis:!0},{title:"Merek Barang",key:"merek_barang",dataIndex:"merek_barang",align:"center",ellipsis:!0},{title:"Model",key:"model",dataIndex:"model",align:"center",ellipsis:!0},{title:"Harga Perolehan",key:"harga_perolehan",align:"center",ellipsis:!0,render:e=>"IDR"==e.currency_perolehan?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.harga_perolehan):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.harga_perolehan)},{title:"Currency Perolehan",dataIndex:"currency_perolehan",key:"currency_perolehan",align:"center",ellipsis:!0},{title:"Serial Number",key:"serial_number",dataIndex:"serial_number",align:"center",ellipsis:!0},{title:"Anggaran Asset",key:"anggaran_asset",dataIndex:"anggaran_asset",align:"center",ellipsis:!0},{title:"Masa Manfaat (Year)",dataIndex:"masa_manfaat",key:"masa_manfaat",align:"center",ellipsis:!0,render:e=>null===e?"0":e},{title:"Flag",dataIndex:"flag",key:"flag",align:"center",ellipsis:!0},{title:"Status Activa",key:"status_activa",dataIndex:"status_activa",align:"center",ellipsis:!0},{title:"Remark",key:"remark",dataIndex:"remark",align:"center",ellipsis:!0},{title:"Kondisi Barang",key:"status",fixed:"right",align:"center",width:150,ellipsis:!0,dataIndex:"status"}],data:D,loading:K,scroll:{x:4e3,y:350},total:z,onShowSizeChange:M,current:B.current_page})]})})]}):(0,n.jsx)(r.GH,{status:403})};a.default=S},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,7847,5431,7698,1577,9329,8571,6447,4187,1003,5063,9569,9774,2888,179],function(){return e(e.s=92114)}),_N_E=e.O()}]);