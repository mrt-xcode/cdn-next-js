(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5510],{97565:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/master/location-old/edit/[id]",function(){return a(7773)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return A},HO:function(){return w},I7:function(){return T},Ko:function(){return k},L5:function(){return b},OD:function(){return _},OU:function(){return E},V2:function(){return l},XH:function(){return p},Yq:function(){return g},cF:function(){return u},fu:function(){return m},jP:function(){return c},jq:function(){return j},ps:function(){return v},sW:function(){return x},sx:function(){return f},vq:function(){return C}});var s=a(23404),n=a(84105),o=a(17594),r=a(64187);let{confirm:d}=r.Z,i=()=>{},l=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message)})},u=async(e,t,a,n,r,d)=>{d(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{r(),(0,o.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{d(!1)})},c=async(e,t,a,n,r)=>{n(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,o.tA)(e.data.status,e.data.message),r.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{n(!1)})},p=async(e,t,a,n,r,d,i)=>{await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{r(!0),(0,o.tA)(e.data.status,e.data.message),d({}),a({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{i()})},m=(e,t,a)=>{i(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){h(e,t,a)},onCancel(){}}))},h=async(e,t,a)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,o.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,o.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},g=(e,t,a,s,n,o)=>{i(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){y(e,t,a,s,n,o)},onCancel(){}}))},y=async(e,t,a,n,r,d)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,o.lt)(e.data.status,e.data.message),n(!1),r(!0),d({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,o.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},f=async function(e,t,a,n,o){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:r}}).then(e=>{n(e.data.data),o(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},x=async(e,t)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message)})},T=async(e,t,a)=>{a(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},w=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},v=async(e,t)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,o.lt)(t.response.statusText,t.response.data.message)})},j=async(e,t,a)=>{a(!0);let n=e.pathname.split("/"),o="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=o?o:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},_=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var s=n.ij(a,{type:"array",cellText:!1,cellDates:!0}),o=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);o.splice(0,2),t(o)},a.readAsArrayBuffer(e)},b=async(e,t,a,n,r)=>{n(!0),await s.Z.post(e,{rows:t}).then(e=>{(0,o.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,o.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(r).value=""})},C=async(e,t)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()})},Z=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),E=async(e,t,a)=>{await Z(e).then(t=>{let s=e.name,n="data:"+e.type+";base64,",o=t.replaceAll(n,""),r=e.type;a(s,n,o,r)}),document.getElementById(t).value=""},k=(e,t,a,s)=>{t(!0),Z(e).then(n=>{let o="data:"+e.type+";base64,",r=n.replaceAll(o,""),d=e.name;s(d,n,o,r),t(!1),document.getElementById(a).value=""})},A=async function(e,t,a,n,o,r,d,i){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:d+1,keyword:a.keyword,per_page:a.pageSize,id:l}}).then(e=>{let t=r.concat(e.data.data);n(t),o(e.data.meta.total),i(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},7773:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(17594),o=a(44320),r=a(17360),d=a(15746),i=a(71230),l=a(58131),u=a(11163),c=a(67294);let p=()=>{let e=(0,u.useRouter)(),{id:t}=e.query,[a,p]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),[g,y]=(0,c.useState)({update:!0}),[f,x]=(0,c.useState)({}),[T,w]=(0,c.useState)({id:"",address:"",code:"",contact:"",name:"",opening_date:"",phone:"",postal:""});(0,c.useEffect)(()=>{(0,o.sW)("api/master/location/"+t,w),(0,o.jq)(e,y,h)},[]);let v=(e,t)=>{w({...T,opening_date:t})},j=e=>{(0,o.HO)(e,T,w)},_=()=>{(0,o.jP)("api/master/location",T,x,p,e)};return m?(0,s.jsx)(n.Kg,{}):g.update?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.HU,{}),(0,s.jsxs)(r.Z,{cover:(0,s.jsx)(d.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,s.jsx)(n.Xl,{title:T.name}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(d.Z,{span:24,children:(0,s.jsxs)(l.Z,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},children:[(0,s.jsx)(n.C$,{label:"Code",validate:f.code,name:"code",id:"code",onChange:j,value:T.code}),(0,s.jsx)(n.C$,{value:T.name,label:"Name",validate:f.name,name:"name",id:"name",isRequired:!0,onChange:j,style:{marginTop:-20}}),(0,s.jsx)(n.C$,{value:T.contact,label:"Contact",validate:f.contact,name:"contact",id:"contact",onChange:j,style:{marginTop:-20}}),(0,s.jsx)(n.r4,{value:T.address,label:"Address",validate:f.address,name:"address",id:"address",onChange:j,style:{marginTop:-20}}),(0,s.jsx)(n.jj,{value:T.opening_date,label:"Opening Date",validate:f.opening_date,name:"opening_date",id:"opening_date",onChange:v,style:{marginTop:-20}}),(0,s.jsx)(n.C$,{value:T.postal,label:"Postal",validate:f.postal,name:"postal",id:"postal",onChange:j,style:{marginTop:-20}}),(0,s.jsx)(n.C$,{value:T.phone,label:"Phone",validate:f.phone,name:"phone",id:"phone",onChange:j,style:{marginTop:-20}})]})})}),(0,s.jsx)(n.u5,{onSubmit:_,isSubmit:a,id:T.id})]})]}):(0,s.jsx)(n.GH,{status:403})};t.default=p},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,3062,1577,9329,8571,8131,6447,4187,1003,9774,2888,179],function(){return e(e.s=97565)}),_N_E=e.O()}]);