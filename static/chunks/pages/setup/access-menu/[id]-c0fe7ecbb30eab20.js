(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7292],{45810:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setup/access-menu/[id]",function(){return a(36e3)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return E},HO:function(){return j},I7:function(){return f},Ko:function(){return C},L5:function(){return k},OD:function(){return T},OU:function(){return _},V2:function(){return c},XH:function(){return p},Yq:function(){return y},cF:function(){return o},fu:function(){return h},jP:function(){return u},jq:function(){return v},ps:function(){return Z},sW:function(){return w},sx:function(){return g},vq:function(){return b}});var s=a(23404),n=a(84105),r=a(17594),i=a(64187);let{confirm:d}=i.Z,l=()=>{},c=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},o=async(e,t,a,n,i,d)=>{d(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(),(0,r.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{d(!1)})},u=async(e,t,a,n,i)=>{n(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),i.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{n(!1)})},p=async(e,t,a,n,i,d,l)=>{await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(!0),(0,r.tA)(e.data.status,e.data.message),d({}),a({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{l()})},h=(e,t,a)=>{l(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){m(e,t,a)},onCancel(){}}))},m=async(e,t,a)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},y=(e,t,a,s,n,r)=>{l(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){x(e,t,a,s,n,r)},onCancel(){}}))},x=async(e,t,a,n,i,d)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),n(!1),i(!0),d({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},g=async function(e,t,a,n,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:i}}).then(e=>{n(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},w=async(e,t)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},f=async(e,t,a)=>{a(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},j=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},Z=async(e,t)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,r.lt)(t.response.statusText,t.response.data.message)})},v=async(e,t,a)=>{a(!0);let n=e.pathname.split("/"),r="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},T=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var s=n.ij(a,{type:"array",cellText:!1,cellDates:!0}),r=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),t(r)},a.readAsArrayBuffer(e)},k=async(e,t,a,n,i)=>{n(!0),await s.Z.post(e,{rows:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(i).value=""})},b=async(e,t)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()})},A=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),_=async(e,t,a)=>{await A(e).then(t=>{let s=e.name,n="data:"+e.type+";base64,",r=t.replaceAll(n,""),i=e.type;a(s,n,r,i)}),document.getElementById(t).value=""},C=(e,t,a,s)=>{t(!0),A(e).then(n=>{let r="data:"+e.type+";base64,",i=n.replaceAll(r,""),d=e.name;s(d,n,r,i),t(!1),document.getElementById(a).value=""})},E=async function(e,t,a,n,r,i,d,l){let c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:d+1,keyword:a.keyword,per_page:a.pageSize,id:c}}).then(e=>{let t=i.concat(e.data.data);n(t),r(e.data.meta.total),l(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},36e3:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(47389),r=a(82061),i=a(51042),d=a(51904),l=a(71230),c=a(15746),o=a(71577),u=a(17360),p=a(49053),h=a(11163),m=a(73948),y=a(67294),x=a(17594),g=a(23404),w=a(44320);let f=()=>{let e=(0,h.useRouter)(),{id:t}=e.query,[a,f]=(0,y.useState)([]),[j,Z]=(0,y.useState)([]),[v,T]=(0,y.useState)(!0),[k,b]=(0,y.useState)(!1),[A,_]=(0,y.useState)(!0),[C,E]=(0,y.useState)(!1),[S,P]=(0,y.useState)(!1),[D,G]=(0,y.useState)({}),[N,O]=(0,y.useState)({id:"",code:"",name:""}),[U,I]=(0,y.useState)({viewAny:!0,view:!0,create:!0,update:!0,delete:!0});(0,y.useEffect)(()=>{(0,w.jq)(e,I,T)},[]);let[L,B]=(0,y.useState)({id:"",user_group_id:t,menu_id:"",viewAny:!0,view:!0,create:!0,update:!0,delete:!1});(0,y.useEffect)(()=>{F(),H(),M()},[]);let F=()=>{T(!0),(0,g.Z)({method:"GET",url:"api/setup/access-menu/"+t}).then(e=>{O(e.data)}).catch(e=>{404==e.response.status&&(_(!1),G(e.response))}).finally(()=>{T(!1)})},H=()=>{(0,g.Z)({method:"GET",url:"api/list-menus"}).then(e=>{f(e.data)}).catch(e=>{})},M=()=>{b(!0),(0,g.Z)({method:"GET",url:"api/setup/access-menu-permision/"+t}).then(e=>{Z(e.data)}).catch(e=>{}).finally(()=>{b(!1)})},R=e=>{P(!S),B({id:e.id,user_group_id:t,menu_id:e.menu_id,viewAny:e.viewAny,view:e.view,create:e.create,update:e.update,delete:e.delete})},q=e=>{B({...L,menu_id:e})},J=()=>{P(!S),B({id:"",user_group_id:t,menu_id:"",viewAny:!0,view:!0,create:!0,update:!0,delete:!1})},V=()=>{P(!S)},z=e=>{B({...L,viewAny:e})},X=e=>{B({...L,view:e})},K=e=>{B({...L,update:e})},Y=e=>{B({...L,create:e})},W=e=>{B({...L,delete:e})},Q=[{key:"1",label:(0,s.jsxs)("div",{onClick:V,children:[(0,s.jsx)(i.Z,{})," Add Menu"]})}];return v?(0,s.jsx)(x.Kg,{}):U.viewAny?A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.HU,{}),(0,s.jsxs)(u.Z,{cover:(0,s.jsx)(c.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(c.Z,{span:22,children:(0,s.jsx)(x.Xl,{title:N.name})}),(0,s.jsx)(c.Z,{span:2,children:(0,s.jsx)(o.ZP,{type:"primary",onClick:()=>e.push("/setup/access-menu"),style:{float:"right"},children:"Back"})})]}),(0,s.jsx)(l.Z,{gutter:4,style:{flex:1},children:(0,s.jsx)(c.Z,{span:24,children:(0,s.jsx)(p.Z,{defaultActiveKey:"1",items:[{label:"Data",key:"Data",children:(0,s.jsx)(x.Gh,{data:N})},{label:"List Menu",key:"ListMenu",children:(0,s.jsx)(x.Hy,{items:Q,columns:[{title:"Menu",key:"menu",dataIndex:"menu",align:"center",ellipsis:!0},{title:"View Any",key:"viewAny",dataIndex:"viewAny",align:"center",width:100,render:e=>e?(0,s.jsx)(d.Z,{color:"#5cb85c",children:(0,s.jsx)(m.Z,{type:"check"})}):(0,s.jsx)(d.Z,{color:"#cd201f",children:(0,s.jsx)(m.Z,{type:"close"})})},{title:"View",key:"view",dataIndex:"view",align:"center",width:100,render:e=>e?(0,s.jsx)(d.Z,{color:"#5cb85c",children:(0,s.jsx)(m.Z,{type:"check"})}):(0,s.jsx)(d.Z,{color:"#cd201f",children:(0,s.jsx)(m.Z,{type:"close"})})},{title:"Create",key:"create",dataIndex:"create",align:"center",width:100,render:e=>(0,s.jsx)(d.Z,{color:e?"#5cb85c":"#cd201f",children:(0,s.jsx)(m.Z,{type:e?"check":"close"})})},{title:"Update",key:"update",dataIndex:"update",align:"center",width:100,render:e=>e?(0,s.jsx)(d.Z,{color:"#5cb85c",children:(0,s.jsx)(m.Z,{type:"check"})}):(0,s.jsx)(d.Z,{color:"#cd201f",children:(0,s.jsx)(m.Z,{type:"close"})})},{title:"Delete",key:"delete",dataIndex:"delete",align:"center",width:100,render:e=>e?(0,s.jsx)(d.Z,{color:"#5cb85c",children:(0,s.jsx)(m.Z,{type:"check"})}):(0,s.jsx)(d.Z,{color:"#cd201f",children:(0,s.jsx)(m.Z,{type:"close"})})},{title:"Action",key:"id",width:120,align:"center",fixed:"right",render:e=>(0,s.jsxs)(l.Z,{justify:"center",children:[(0,s.jsx)(c.Z,{span:8,children:(0,s.jsx)(o.ZP,{type:"primary",style:{backgroundColor:"#FAAD14"},icon:(0,s.jsx)(n.Z,{}),size:"small",onClick(){R(e)}})}),(0,s.jsx)(c.Z,{span:8,children:(0,s.jsx)(o.ZP,{onClick(){(0,w.fu)(e.id,"/api/setup/access-menu-permision",M)},type:"primary",icon:(0,s.jsx)(r.Z,{}),size:"small",danger:!0})})]})}],data:j,isLoadingTable:k,scroll:{y:500}})}]})})})]}),(0,s.jsxs)(x.Tk,{id:L.id,title:"Menu",onCancel:J,onSubmit:()=>(0,w.cF)("/api/setup/access-menu-permision",L,G,M,J,E),isSubmit:C,open:S,children:[(0,s.jsx)(x.TD,{value:L.menu_id,label:"Menu",onChange:q,options:a,disabled:L.id>0}),(0,s.jsx)(x.NJ,{value:L.viewAny,onChange:z,label:"View Any",name:"viewAny"}),(0,s.jsx)(x.NJ,{value:L.view,onChange:X,label:"View",name:"view"}),(0,s.jsx)(x.NJ,{value:L.create,onChange:Y,label:"Create",name:"create"}),(0,s.jsx)(x.NJ,{value:L.update,onChange:K,label:"Update",name:"update"}),(0,s.jsx)(x.NJ,{value:L.delete,onChange:W,label:"Delete",name:"delete"})]})]}):(0,s.jsx)(x.GH,{status:D.status}):(0,s.jsx)(x.GH,{status:403})};t.default=f},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,1577,9329,8571,6447,4187,1003,5078,3948,8946,9774,2888,179],function(){return e(e.s=45810)}),_N_E=e.O()}]);