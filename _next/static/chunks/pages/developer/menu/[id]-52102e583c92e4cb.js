(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5311],{6270:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/developer/menu/[id]",function(){return a(70673)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return E},HO:function(){return w},I7:function(){return T},Ko:function(){return C},L5:function(){return k},OD:function(){return Z},OU:function(){return A},V2:function(){return d},XH:function(){return p},Yq:function(){return y},cF:function(){return u},fu:function(){return h},jP:function(){return c},jq:function(){return j},ps:function(){return b},sW:function(){return x},sx:function(){return f},vq:function(){return v}});var s=a(23404),n=a(84105),r=a(17594),i=a(64187);let{confirm:l}=i.Z,o=()=>{},d=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},u=async(e,t,a,n,i,l)=>{l(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(),(0,r.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{l(!1)})},c=async(e,t,a,n,i)=>{n(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),i.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{n(!1)})},p=async(e,t,a,n,i,l,o)=>{await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(!0),(0,r.tA)(e.data.status,e.data.message),l({}),a({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{o()})},h=(e,t,a)=>{o(l({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){m(e,t,a)},onCancel(){}}))},m=async(e,t,a)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},y=(e,t,a,s,n,r)=>{o(l({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){g(e,t,a,s,n,r)},onCancel(){}}))},g=async(e,t,a,n,i,l)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),n(!1),i(!0),l({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},f=async function(e,t,a,n,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:i}}).then(e=>{n(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},x=async(e,t)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},T=async(e,t,a)=>{a(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},w=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},b=async(e,t)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,r.lt)(t.response.statusText,t.response.data.message)})},j=async(e,t,a)=>{a(!0);let n=e.pathname.split("/"),r="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},Z=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var s=n.ij(a,{type:"array",cellText:!1,cellDates:!0}),r=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),t(r)},a.readAsArrayBuffer(e)},k=async(e,t,a,n,i)=>{n(!0),await s.Z.post(e,{rows:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(i).value=""})},v=async(e,t)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()})},_=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),A=async(e,t,a)=>{await _(e).then(t=>{let s=e.name,n="data:"+e.type+";base64,",r=t.replaceAll(n,""),i=e.type;a(s,n,r,i)}),document.getElementById(t).value=""},C=(e,t,a,s)=>{t(!0),_(e).then(n=>{let r="data:"+e.type+";base64,",i=n.replaceAll(r,""),l=e.name;s(l,n,r,i),t(!1),document.getElementById(a).value=""})},E=async function(e,t,a,n,r,i,l,o){let d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:l+1,keyword:a.keyword,per_page:a.pageSize,id:d}}).then(e=>{let t=i.concat(e.data.data);n(t),r(e.data.meta.total),o(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},70673:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(47389),r=a(82061),i=a(51042),l=a(7780),o=a(71230),d=a(15746),u=a(71577),c=a(17360),p=a(49053),h=a(11163),m=a(73948),y=a(67294),g=a(17594),f=a(23404),x=a(44320);let{Title:T}=l.Z,w=()=>{let e=(0,h.useRouter)(),{id:t}=e.query,[a,l]=(0,y.useState)(!0),[w,b]=(0,y.useState)(!1),[j,Z]=(0,y.useState)(!0),[k,v]=(0,y.useState)(!1),[_,A]=(0,y.useState)(!1),[C,E]=(0,y.useState)([]),[S,P]=(0,y.useState)({}),[O,D]=(0,y.useState)({id:"",label:"",icon:"",path:"",roles:[],children:[]}),[G,B]=(0,y.useState)({id:"",label:"",icon:"",path:"",parent_id:t});(0,y.useEffect)(()=>{R(),I()},[]);let R=()=>{l(!0),(0,f.Z)({method:"GET",url:"api/menu/"+t}).then(e=>{D(e.data)}).catch(e=>{404==e.response.status&&(Z(!1),P(e.response))}).finally(()=>{l(!1)})},U=()=>{b(!0),(0,f.Z)({method:"GET",url:"api/menu/"+t}).then(e=>{D(e.data)}).catch(e=>{}).finally(()=>{b(!1)})},I=()=>{(0,f.Z)({method:"GET",url:"api/list-icon"}).then(e=>{E(e.data)}).catch(e=>{})},L=e=>{A(!_),B({id:e.id,label:e.label,icon:e.icon,path:e.path,parent_id:t})},q=e=>{B({...G,[e.target.id]:e.target.value})},F=e=>{B({...G,icon:e})},N=()=>{A(!_),B({id:"",label:"",icon:"",path:"",parent_id:t})},z=e=>{A(!_)},H=[{key:"1",label:(0,s.jsxs)("div",{onClick:z,children:[(0,s.jsx)(i.Z,{})," Add Menu ",void 0]})}];return a?(0,s.jsx)(g.Kg,{}):j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.HU,{}),(0,s.jsxs)(c.Z,{cover:(0,s.jsx)(d.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(d.Z,{span:22,children:(0,s.jsxs)(T,{level:3,children:["Detail Menu "," > "+O.label]})}),(0,s.jsx)(d.Z,{span:2,children:(0,s.jsx)(u.ZP,{type:"primary",onClick:()=>e.push("/developer/menu"),style:{float:"right"},children:"Back"})})]}),(0,s.jsx)(o.Z,{gutter:4,style:{flex:1},children:(0,s.jsx)(d.Z,{span:24,children:(0,s.jsx)(p.Z,{defaultActiveKey:"1",items:[{label:"Data",key:"Data",children:(0,s.jsx)(g.AL,{data:O})},{label:"Child",key:"Children",children:(0,s.jsx)(g.ml,{items:H,columns:[{title:"Label",key:"label",dataIndex:"label",align:"center",ellipsis:!0},{title:"Icon",key:"icon",align:"center",width:100,render:e=>(0,s.jsx)(m.Z,{type:e.icon})},{title:"Path",dataIndex:"path",key:"path",width:200,align:"center",ellipsis:!0},{title:"Action",key:"id",width:120,align:"center",fixed:"right",render:e=>(0,s.jsxs)(o.Z,{justify:"center",children:[(0,s.jsx)(d.Z,{span:8,children:(0,s.jsx)(u.ZP,{type:"primary",style:{backgroundColor:"#FAAD14"},icon:(0,s.jsx)(n.Z,{}),size:"small",onClick(){L(e)}})}),(0,s.jsx)(d.Z,{span:8,children:(0,s.jsx)(u.ZP,{onClick(){(0,x.fu)(e.id,"/api/menu",U)},type:"primary",icon:(0,s.jsx)(r.Z,{}),size:"small",danger:!0})})]})}],total:O.children.length,data:O.children,isLoadingTable:w,scroll:{y:250}})}]})})})]}),(0,s.jsxs)(g.Tk,{id:G.id,title:"Menu",onCancel:N,onSubmit:()=>(0,x.cF)("api/menu",G,P,U,N,v),isSubmit:k,open:_,children:[(0,s.jsx)(g.C$,{value:G.label,id:"label",validate:S.label,isRequired:!0,label:"Label",onChange:q}),(0,s.jsx)(g.jm,{validate:S.icon,value:G.icon,id:"icon",options:C,isRequired:!0,label:"Icon",onChange:F}),(0,s.jsx)(g.C$,{value:G.path,validate:S.path,id:"path",isRequired:!0,label:"Path",onChange:q})]})]}):(0,s.jsx)(g.GH,{status:S.status,subTitle:S.data.message,labelButton:"Back",handleBack:()=>e.push("/developer/menu")})};t.default=w},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,3062,1577,9329,8571,6447,4187,1003,26,2913,7780,5078,3948,560,9774,2888,179],function(){return e(e.s=6270)}),_N_E=e.O()}]);