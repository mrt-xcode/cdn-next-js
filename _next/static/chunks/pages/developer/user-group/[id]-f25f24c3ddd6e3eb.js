(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1076],{51795:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/developer/user-group/[id]",function(){return a(28864)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return E},HO:function(){return j},I7:function(){return f},Ko:function(){return C},L5:function(){return b},OD:function(){return T},OU:function(){return A},V2:function(){return o},XH:function(){return p},Yq:function(){return x},cF:function(){return u},fu:function(){return h},jP:function(){return c},jq:function(){return v},ps:function(){return Z},sW:function(){return w},sx:function(){return g},vq:function(){return k}});var s=a(23404),n=a(84105),r=a(17594),i=a(64187);let{confirm:d}=i.Z,l=()=>{},o=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},u=async(e,t,a,n,i,d)=>{d(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(),(0,r.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{d(!1)})},c=async(e,t,a,n,i)=>{n(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),i.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{n(!1)})},p=async(e,t,a,n,i,d,l)=>{await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(!0),(0,r.tA)(e.data.status,e.data.message),d({}),a({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{l()})},h=(e,t,a)=>{l(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){m(e,t,a)},onCancel(){}}))},m=async(e,t,a)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},x=(e,t,a,s,n,r)=>{l(d({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){y(e,t,a,s,n,r)},onCancel(){}}))},y=async(e,t,a,n,i,d)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),n(!1),i(!0),d({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},g=async function(e,t,a,n,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:i}}).then(e=>{n(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},w=async(e,t)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},f=async(e,t,a)=>{a(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},j=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},Z=async(e,t)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,r.lt)(t.response.statusText,t.response.data.message)})},v=async(e,t,a)=>{a(!0);let n=e.pathname.split("/"),r="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},T=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var s=(0,n.ij)(a,{type:"array",cellText:!1,cellDates:!0}),r=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),t(r)},a.readAsArrayBuffer(e)},b=async(e,t,a,n,i)=>{n(!0),await s.Z.post(e,{rows:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(i).value=""})},k=async(e,t)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()})},_=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),A=async(e,t,a)=>{await _(e).then(t=>{let s=e.name,n="data:"+e.type+";base64,",r=t.replaceAll(n,""),i=e.type;a(s,n,r,i)}),document.getElementById(t).value=""},C=(e,t,a,s)=>{t(!0),_(e).then(n=>{let r="data:"+e.type+";base64,",i=n.replaceAll(r,""),d=e.name;s(d,n,r,i),t(!1),document.getElementById(a).value=""})},E=async function(e,t,a,n,r,i,d,l){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:d+1,keyword:a.keyword,per_page:a.pageSize,id:o}}).then(e=>{let t=i.concat(e.data.data);n(t),r(e.data.meta.total),l(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},28864:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(88284),r=a(28508),i=a(47389),d=a(82061),l=a(51042),o=a(51904),u=a(71230),c=a(15746),p=a(71577),h=a(17360),m=a(49053),x=a(11163),y=a(67294),g=a(17594),w=a(23404),f=a(44320);let j=()=>{let e=(0,x.useRouter)(),{id:t}=e.query,[a,j]=(0,y.useState)([]),[Z,v]=(0,y.useState)([]),[T,b]=(0,y.useState)(!0),[k,_]=(0,y.useState)(!1),[A,C]=(0,y.useState)(!0),[E,S]=(0,y.useState)(!1),[P,D]=(0,y.useState)(!1),[G,N]=(0,y.useState)({}),[O,U]=(0,y.useState)({id:"",code:"",name:""}),[I,B]=(0,y.useState)({id:"",user_group_id:t,menu_id:"",viewAny:!0,view:!0,create:!0,update:!0,delete:!1});(0,y.useEffect)(()=>{L(),F(),M()},[]);let L=()=>{b(!0),(0,w.Z)({method:"GET",url:"api/user-group/"+t}).then(e=>{U(e.data)}).catch(e=>{404==e.response.status&&(C(!1),N(e.response))}).finally(()=>{b(!1)})},F=()=>{(0,w.Z)({method:"GET",url:"api/list-menus"}).then(e=>{j(e.data)}).catch(e=>{})},M=()=>{_(!0),(0,w.Z)({method:"GET",url:"api/menu-list-permision/"+t}).then(e=>{v(e.data)}).catch(e=>{}).finally(()=>{_(!1)})},R=e=>{D(!P),B({id:e.id,user_group_id:t,menu_id:e.menu_id,viewAny:e.viewAny,view:e.view,create:e.create,update:e.update,delete:e.delete})},H=e=>{B({...I,menu_id:e})},J=()=>{D(!P),B({id:"",user_group_id:t,menu_id:"",viewAny:!0,view:!0,create:!0,update:!0,delete:!1})},V=()=>{D(!P)},q=e=>{B({...I,viewAny:e})},z=e=>{B({...I,view:e})},X=e=>{B({...I,update:e})},K=e=>{B({...I,create:e})},Y=e=>{B({...I,delete:e})},W=[{key:"1",label:(0,s.jsxs)("div",{onClick:V,children:[(0,s.jsx)(l.Z,{})," Add Menu"]})}];return T?(0,s.jsx)(g.Kg,{}):A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.HU,{}),(0,s.jsxs)(h.Z,{cover:(0,s.jsx)(c.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(c.Z,{span:22,children:(0,s.jsx)(g.Xl,{title:O.name})}),(0,s.jsx)(c.Z,{span:2,children:(0,s.jsx)(p.ZP,{type:"primary",onClick:()=>e.push("/developer/user-group"),style:{float:"right"},children:"Back"})})]}),(0,s.jsx)(u.Z,{gutter:4,style:{flex:1},children:(0,s.jsx)(c.Z,{span:24,children:(0,s.jsx)(m.Z,{defaultActiveKey:"1",items:[{label:"Data",key:"Data",children:(0,s.jsx)(g.Gh,{data:O})},{label:"List Menu",key:"ListMenu",children:(0,s.jsx)(g.Hy,{items:W,columns:[{title:"Menu",key:"menu",dataIndex:"menu",align:"center",ellipsis:!0},{title:"View Any",key:"viewAny",dataIndex:"viewAny",align:"center",width:100,render:e=>e?(0,s.jsx)(o.Z,{color:"#5cb85c",children:(0,s.jsx)(n.Z,{})}):(0,s.jsx)(o.Z,{color:"#cd201f",children:(0,s.jsx)(r.Z,{})})},{title:"View",key:"view",dataIndex:"view",align:"center",width:100,render:e=>e?(0,s.jsx)(o.Z,{color:"#5cb85c",children:(0,s.jsx)(n.Z,{})}):(0,s.jsx)(o.Z,{color:"#cd201f",children:(0,s.jsx)(r.Z,{})})},{title:"Create",key:"create",dataIndex:"create",align:"center",width:100,render:e=>e?(0,s.jsx)(o.Z,{color:"#5cb85c",children:(0,s.jsx)(n.Z,{})}):(0,s.jsx)(o.Z,{color:"#cd201f",children:(0,s.jsx)(r.Z,{})})},{title:"Update",key:"update",dataIndex:"update",align:"center",width:100,render:e=>e?(0,s.jsx)(o.Z,{color:"#5cb85c",children:(0,s.jsx)(n.Z,{})}):(0,s.jsx)(o.Z,{color:"#cd201f",children:(0,s.jsx)(r.Z,{})})},{title:"Delete",key:"delete",dataIndex:"delete",align:"center",width:100,render:e=>e?(0,s.jsx)(o.Z,{color:"#5cb85c",children:(0,s.jsx)(n.Z,{})}):(0,s.jsx)(o.Z,{color:"#cd201f",children:(0,s.jsx)(r.Z,{})})},{title:"Action",key:"id",width:120,align:"center",fixed:"right",render:e=>(0,s.jsxs)(u.Z,{justify:"center",children:[(0,s.jsx)(c.Z,{span:8,children:(0,s.jsx)(p.ZP,{type:"primary",style:{backgroundColor:"#FAAD14"},icon:(0,s.jsx)(i.Z,{}),size:"small",onClick(){R(e)}})}),(0,s.jsx)(c.Z,{span:8,children:(0,s.jsx)(p.ZP,{onClick(){(0,f.fu)(e.id,"/api/menu-list-permision",M)},type:"primary",icon:(0,s.jsx)(d.Z,{}),size:"small",danger:!0})})]})}],data:Z,isLoadingTable:k,scroll:{y:500}})}]})})})]}),(0,s.jsxs)(g.Tk,{id:I.id,title:"Menu",onCancel:J,onSubmit:()=>(0,f.cF)("/api/menu-list-permision",I,N,M,J,S),isSubmit:E,open:P,children:[(0,s.jsx)(g.TD,{value:I.menu_id,label:"Menu",onChange:H,options:a,disabled:I.id>0}),(0,s.jsx)(g.NJ,{value:I.viewAny,onChange:q,label:"View Any",name:"viewAny"}),(0,s.jsx)(g.NJ,{value:I.view,onChange:z,label:"View",name:"view"}),(0,s.jsx)(g.NJ,{value:I.create,onChange:K,label:"Create",name:"create"}),(0,s.jsx)(g.NJ,{value:I.update,onChange:X,label:"Update",name:"update"}),(0,s.jsx)(g.NJ,{value:I.delete,onChange:Y,label:"Delete",name:"delete"})]})]}):(0,s.jsx)(g.GH,{status:G.status,subTitle:G.data.message,labelButton:"Back",handleBack:()=>e.push("/developer/user-group")})};t.default=j},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,1577,9329,8571,6447,4187,1003,6333,9774,2888,179],function(){return e(e.s=51795)}),_N_E=e.O()}]);
//# sourceMappingURL=[id]-f25f24c3ddd6e3eb.js.map