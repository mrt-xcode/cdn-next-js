(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5707],{15104:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset/fix-assets",function(){return a(88358)}])},44320:function(e,t,a){"use strict";a.d(t,{AD:function(){return I},HO:function(){return T},I7:function(){return w},Ko:function(){return E},L5:function(){return S},OD:function(){return v},OU:function(){return Z},V2:function(){return l},XH:function(){return c},Yq:function(){return y},cF:function(){return u},fu:function(){return h},jP:function(){return p},jq:function(){return k},ps:function(){return _},sW:function(){return x},sx:function(){return g},vq:function(){return j}});var s=a(23404),n=a(84105),r=a(17594),i=a(64187);let{confirm:o}=i.Z,d=()=>{},l=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(t=>{e(t.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},u=async(e,t,a,n,i,o)=>{o(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(),(0,r.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{o(!1)})},p=async(e,t,a,n,i)=>{n(!0),await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),i.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{n(!1)})},c=async(e,t,a,n,i,o,d)=>{await (0,s.Z)({method:t.id>0?"PUT":"POST",url:t.id>0?e+"/"+t.id:e,data:t}).then(e=>{i(!0),(0,r.tA)(e.data.status,e.data.message),o({}),a({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&a(e.response.data.errors)}).finally(()=>{d()})},h=(e,t,a)=>{d(o({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){m(e,t,a)},onCancel(){}}))},m=async(e,t,a)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},y=(e,t,a,s,n,r)=>{d(o({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){f(e,t,a,s,n,r)},onCancel(){}}))},f=async(e,t,a,n,i,o)=>{await s.Z.delete(t+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),n(!1),i(!0),o({})}).catch(e=>{let t="statusText"in e.response,a="message"in e.response.data;t&&a&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a()})},g=async function(e,t,a,n,r){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:a.current_page,keyword:a.keyword,per_page:a.pageSize,id:i}}).then(e=>{n(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},x=async(e,t)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},w=async(e,t,a)=>{a(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{t(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{a(!0)})},T=(e,t,a)=>{a({...t,[e.target.id]:e.target.value})},_=async(e,t)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{t(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),"statusText"in t.response&&"message"in t.response.data&&(0,r.lt)(t.response.statusText,t.response.data.message)})},k=async(e,t,a)=>{a(!0);let n=e.pathname.split("/"),r="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{t(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),t({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{a(!1)})},v=(e,t)=>{var a=new FileReader;a.onload=e=>{var a=e.target.result;a=new Uint8Array(a);var s=n.ij(a,{type:"array",cellText:!1,cellDates:!0}),r=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),t(r)},a.readAsArrayBuffer(e)},S=async(e,t,a,n,i)=>{n(!0),await s.Z.post(e,{rows:t}).then(e=>{(0,r.tA)(e.data.status,e.data.message),a()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(i).value=""})},j=async(e,t)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove()})},b=e=>new Promise((t,a)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>t(s.result),s.onerror=e=>a(e)}),Z=async(e,t,a)=>{await b(e).then(t=>{let s=e.name,n="data:"+e.type+";base64,",r=t.replaceAll(n,""),i=e.type;a(s,n,r,i)}),document.getElementById(t).value=""},E=(e,t,a,s)=>{t(!0),b(e).then(n=>{let r="data:"+e.type+";base64,",i=n.replaceAll(r,""),o=e.name;s(o,n,r,i),t(!1),document.getElementById(a).value=""})},I=async function(e,t,a,n,r,i,o,d){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:t,params:{page:o+1,keyword:a.keyword,per_page:a.pageSize,id:l}}).then(e=>{let t=i.concat(e.data.data);n(t),r(e.data.meta.total),d(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},88358:function(e,t,a){"use strict";a.r(t);var s=a(85893),n=a(88484),r=a(69753),i=a(71230),o=a(15746),d=a(19301),l=a(28809),u=a(17594),p=a(44320),c=a(11163),h=a(67294);let m=()=>{let e=(0,c.useRouter)(),[t,a]=(0,h.useState)(0),[m,y]=(0,h.useState)(1),[f,g]=(0,h.useState)(!1),[x,w]=(0,h.useState)(!0),[T,_]=(0,h.useState)(!1),[k,v]=(0,h.useState)(!1),[S,j]=(0,h.useState)([]),[b,Z]=(0,h.useState)(!1),[E,I]=(0,h.useState)({}),[A,O]=(0,h.useState)({viewAny:!0,view:!0,create:!0,update:!0,delete:!0}),[P,C]=(0,h.useState)({pageSize:15,current_page:1,keyword:""}),[D,U]=(0,h.useState)({id:"",code:"",name:"",description:"",provinsi:"",provinsi_id:"",kota_id:""}),z=()=>{C({pageSize:15,current_page:1,keyword:""}),y(1),q()};(0,h.useEffect)(()=>{(0,p.jq)(e,O,Z)},[]),(0,h.useEffect)(()=>{q()},[P]);let q=()=>{(0,p.sx)(g,"api/asset/fix-asset",P,j,a)},B=()=>{(0,p.AD)(g,"api/asset/fix-asset",P,j,a,S,m,y)},G=(e,t)=>{e.preventDefault(),w(!1),v(!1),(0,p.I7)("api/asset/fix-asset/"+t,U,_)},N=()=>{v(!1),(0,p.XH)("api/asset/fix-asset",D,I,_,w,U,q)},F=()=>{_(!1),w(!0),v(!1),U({id:"",code:"",name:"",description:"",provinsi:"",provinsi_id:"",kota_id:""})},R=()=>{_(!1),v(!1),U({id:"",code:"",name:"",description:"",provinsi:"",provinsi_id:"",kota_id:""}),setTimeout(()=>{_(!0)},50),w(!1)},H=()=>{D.id>0?(0,p.Yq)(D.id,"api/asset/fix-asset",q,_,w,U):(0,u.lt)("Error","Please select data...")},L=e=>{(0,p.HO)(e,D,U)},M=()=>{let e=document.getElementById("input-file");e.click()},X=async()=>{(0,p.vq)("api/master/template/branch","Template Master Branch.xlsx")},Y=e=>{(0,p.OD)(e.target.files[0],K)},K=e=>{Q(e.map(e=>({code:e[1]||"",name:e[2]||"",description:e[3]||""})))},Q=e=>{(0,p.L5)("api/master/import/branch",e,q,g,"input-file")},V=[{key:"2",label:(0,s.jsxs)("div",{onClick:M,children:[(0,s.jsx)(n.Z,{})," Import Master"]})},{key:"3",label:(0,s.jsxs)("div",{onClick:X,children:[(0,s.jsx)(r.Z,{})," Download Template"]})}];return b?(0,s.jsx)(u.Kg,{}):A.viewAny?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.HU,{}),(0,s.jsx)(u.ZI,{onDetail:G,handleSearch:function(e){C({...P,[e.target.id]:e.target.value})},refresh:z,data:S,total:t,paginate:P,loading:f,accessPermission:A,onLoadMore:B,handleBack:F,handleRemove:H,items:V,handleInsert:R,isForms:T,handleSubmit:N,id:D.id,showTable:k,showTableTogle:!0,onTableTogle:()=>v(!k),children:k?(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(o.Z,{span:24,children:(0,s.jsx)(d.Z,{dataSource:S,columns:[{key:"id",title:"ID",dataIndex:"id",fixed:"left",width:40},{key:"fix_asset_group",title:"Fix Asset Group",dataIndex:"fix_asset_group",width:200},{key:"number",title:"Number",dataIndex:"number",width:200},{key:"search_name",title:"Search Name",dataIndex:"search_name",width:200},{key:"type",title:"Type",dataIndex:"type",width:100},{key:"major_type",title:"Major Type",dataIndex:"major_type",width:200},{key:"property_type",title:"Property Type",dataIndex:"property_type",width:200},{key:"quantity",title:"Quantity",dataIndex:"quantity",width:100},{key:"unit_of_measure",title:"Unit Of Measure",dataIndex:"unit_of_measure",width:200},{key:"unit_cost",title:"Unit Cost",dataIndex:"unit_cost",width:100}],size:"small",rowKey:"id",loading:f,pagination:!1,bordered:!0,scroll:{x:1800,y:300}})}),(0,s.jsx)(o.Z,{span:24,style:{paddingTop:"10px"},children:(0,s.jsx)(l.Z,{style:{float:"right"},showSizeChanger:!0,defaultCurrent:1,total:t,current:P.current_page,defaultPageSize:15,pageSizeOptions:["15","30","50","100","200"],size:"small"})})]}):(0,s.jsx)(u.E$,{isEmpty:x,forms:D,isForms:T,handleChange:L,errors:E})}),(0,s.jsx)("input",{type:"file",style:{display:"none"},id:"input-file",onChange:e=>Y(e),name:"file",accept:".xlsx, .xls"})]}):(0,s.jsx)(u.GH,{status:403})};t.default=m},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,3062,1577,9329,8571,6447,4187,26,2913,6397,8508,5625,7091,9301,8248,9774,2888,179],function(){return e(e.s=15104)}),_N_E=e.O()}]);