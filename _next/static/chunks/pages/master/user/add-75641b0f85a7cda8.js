(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8300],{63065:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/master/user/add",function(){return t(79272)}])},44320:function(e,a,t){"use strict";t.d(a,{AD:function(){return k},HO:function(){return x},I7:function(){return T},Ko:function(){return S},L5:function(){return b},OD:function(){return _},OU:function(){return C},V2:function(){return d},XH:function(){return p},Yq:function(){return g},cF:function(){return u},fu:function(){return m},jP:function(){return c},jq:function(){return j},ps:function(){return v},sW:function(){return y},sx:function(){return w},vq:function(){return Z}});var s=t(23404),n=t(84105),r=t(17594),o=t(64187);let{confirm:i}=o.Z,l=()=>{},d=async e=>{await (0,s.Z)({method:"GET",url:"api/sidebar"}).then(a=>{e(a.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},u=async(e,a,t,n,o,i)=>{i(!0),await (0,s.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{o(),(0,r.tA)(e.data.status,e.data.message),n()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{i(!1)})},c=async(e,a,t,n,o)=>{n(!0),await (0,s.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{(0,r.tA)(e.data.status,e.data.message),o.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{n(!1)})},p=async(e,a,t,n,o,i,l)=>{await (0,s.Z)({method:a.id>0?"PUT":"POST",url:a.id>0?e+"/"+a.id:e,data:a}).then(e=>{o(!0),(0,r.tA)(e.data.status,e.data.message),i({}),t({}),n(!1)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&t(e.response.data.errors)}).finally(()=>{l()})},m=(e,a,t)=>{l(i({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){h(e,a,t)},onCancel(){}}))},h=async(e,a,t)=>{await s.Z.delete(a+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message)}).catch(e=>{let a="statusText"in e.response,t="message"in e.response.data;a&&t&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t()})},g=(e,a,t,s,n,r)=>{l(i({title:"Do you want to delete these items?",content:"You can't undo this operation",onOk(){f(e,a,t,s,n,r)},onCancel(){}}))},f=async(e,a,t,n,o,i)=>{await s.Z.delete(a+"/"+e).then(e=>{(0,r.lt)(e.data.status,e.data.message),n(!1),o(!0),i({})}).catch(e=>{let a="statusText"in e.response,t="message"in e.response.data;a&&t&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t()})},w=async function(e,a,t,n,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;e(!0),await (0,s.Z)({method:"GET",url:a,params:{page:t.current_page,keyword:t.keyword,per_page:t.pageSize,id:o}}).then(e=>{n(e.data.data),r(e.data.meta.total)}).catch(e=>{}).finally(()=>{e(!1)})},y=async(e,a)=>{await (0,s.Z)({method:"GET",url:e}).then(e=>{a(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)})},T=async(e,a,t)=>{t(!1),await (0,s.Z)({method:"GET",url:e}).then(e=>{a(e.data)}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message)}).finally(()=>{t(!0)})},x=(e,a,t)=>{t({...a,[e.target.id]:e.target.value})},v=async(e,a)=>{await (0,s.Z)({method:"get",url:"api/me"}).then(e=>{a(e.data)}).catch(a=>{401===a.response.status&&e.push("/login"),"statusText"in a.response&&"message"in a.response.data&&(0,r.lt)(a.response.statusText,a.response.data.message)})},j=async(e,a,t)=>{t(!0);let n=e.pathname.split("/"),r="/"+n[1]+"/"+n[2];await (0,s.Z)({method:"GET",url:"api/check-access",params:{path:"//undefined"!=r?r:"/"}}).then(e=>{a(e.data)}).catch(t=>{401===t.response.status&&e.push("/login"),a({viewAny:!1,view:!1,create:!1,update:!1,delete:!1})}).finally(()=>{t(!1)})},_=(e,a)=>{var t=new FileReader;t.onload=e=>{var t=e.target.result;t=new Uint8Array(t);var s=n.ij(t,{type:"array",cellText:!1,cellDates:!0}),r=n.P6.sheet_to_json(s.Sheets[s.SheetNames[0]],{header:1}).filter(e=>!!e[0]);r.splice(0,2),a(r)},t.readAsArrayBuffer(e)},b=async(e,a,t,n,o)=>{n(!0),await s.Z.post(e,{rows:a}).then(e=>{(0,r.tA)(e.data.status,e.data.message),t()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,r.lt)(e.response.statusText,e.response.data.message),n(!1)}).finally(()=>{document.getElementById(o).value=""})},Z=async(e,a)=>{await s.Z.get(e,{responseType:"blob"}).then(e=>{let t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download",a),document.body.appendChild(s),s.click(),s.remove()})},E=e=>new Promise((a,t)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=()=>a(s.result),s.onerror=e=>t(e)}),C=async(e,a,t)=>{await E(e).then(a=>{let s=e.name,n="data:"+e.type+";base64,",r=a.replaceAll(n,""),o=e.type;t(s,n,r,o)}),document.getElementById(a).value=""},S=(e,a,t,s)=>{a(!0),E(e).then(n=>{let r="data:"+e.type+";base64,",o=n.replaceAll(r,""),i=e.name;s(i,n,r,o),a(!1),document.getElementById(t).value=""})},k=async function(e,a,t,n,r,o,i,l){let d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;e(!0),await (0,s.Z)({method:"GET",url:a,params:{page:i+1,keyword:t.keyword,per_page:t.pageSize,id:d}}).then(e=>{let a=o.concat(e.data.data);n(a),r(e.data.meta.total),l(e.data.meta.current_page)}).catch(e=>{}).finally(()=>{e(!1)})}},79272:function(e,a,t){"use strict";t.r(a);var s=t(85893),n=t(23404),r=t(17594),o=t(44320),i=t(17360),l=t(15746),d=t(71230),u=t(58131),c=t(11163),p=t(67294);let m=()=>{let e=(0,c.useRouter)(),[a,t]=(0,p.useState)(!1),[m,h]=(0,p.useState)({create:!0}),[g,f]=(0,p.useState)(!1),[w,y]=(0,p.useState)([]),[T,x]=(0,p.useState)({}),[v,j]=(0,p.useState)({id:"",email:"",id:"",name:"",role:"",password:"",password_confirmation:""}),_=e=>{(0,o.HO)(e,v,j)},b=()=>{(0,o.jP)("api/master/user",v,x,t,e)};(0,p.useEffect)(()=>{(0,o.jq)(e,h,f),Z()},[]);let Z=async()=>{await n.Z.get("api/list-role").then(e=>{y(e.data)})};return g?(0,s.jsx)(r.Kg,{}):m.create?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.HU,{}),(0,s.jsxs)(i.Z,{cover:(0,s.jsx)(l.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,s.jsx)(r.Xl,{}),(0,s.jsx)(d.Z,{children:(0,s.jsx)(l.Z,{span:24,children:(0,s.jsxs)(u.Z,{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},children:[(0,s.jsx)(r.C$,{value:v.name,label:"Name",validate:T.name,name:"name",id:"name",isRequired:!0,onChange:_}),(0,s.jsx)(r.C$,{value:v.email,label:"Email",validate:T.email,name:"email",id:"email",onChange:_,style:{marginTop:-20}}),(0,s.jsx)(r.Is,{label:"Password",style:{marginTop:-20},id:"password",value:v.password,validate:T.password,onChange:_}),(0,s.jsx)(r.Is,{label:"Password Confirmation",style:{marginTop:-20},id:"password_confirmation",value:v.password_confirmation,validate:T.password_confirmation,onChange:_}),(0,s.jsx)(r.TD,{value:v.role,validate:T.role,id:"role",name:"role",label:"Role",style:{marginTop:-20},options:w,onChange:function(e){j({...v,role:e})}})]})})}),(0,s.jsx)(r.u5,{onSubmit:b,isSubmit:a,id:v.id})]})]}):(0,s.jsx)(r.GH,{status:403})};a.default=m},20067:function(){},72061:function(){}},function(e){e.O(0,[2251,5431,7698,3062,1577,9329,8571,8131,6447,4187,1003,9774,2888,179],function(){return e(e.s=63065)}),_N_E=e.O()}]);