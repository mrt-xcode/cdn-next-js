(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2999],{52370:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/audit/edit/[id]",function(){return t(62418)}])},62418:function(e,a,t){"use strict";t.r(a);var n=t(85893),i=t(67294),s=t(11163),d=t(18429),l=t(60219),c=t(49053),o=t(71230),r=t(15746),u=t(17360),m=t(71577),p=t(17594),h=t(23404);let{TabPane:g}=c.Z,_=()=>{(0,i.useEffect)(()=>{er(),ej()},[]);let e=(0,s.useRouter)(),[a,t]=(0,i.useState)({dataDepartement:[]}),[_,y]=(0,i.useState)({dataLocation:[]}),[f,S]=(0,i.useState)({dataBranch:[]}),[b,k]=(0,i.useState)({dataStatus:[]}),[v,x]=(0,i.useState)({dataAssetType:[]}),[A,D]=(0,i.useState)({dataCodeActiva:[]}),[j,C]=(0,i.useState)({dataAnggaran:[]}),[w,P]=(0,i.useState)({dataOwnership:[]}),[T,E]=(0,i.useState)(!1),[Z,I]=(0,i.useState)(!1),[F,B]=(0,i.useState)(""),[L,N]=(0,i.useState)(""),[O,R]=(0,i.useState)(!1),[U,X]=(0,i.useState)(!1),[q,K]=(0,i.useState)(""),[H,z]=(0,i.useState)(!1),[G,J]=(0,i.useState)(),[M,Q]=(0,i.useState)(),[V,W]=(0,i.useState)(),[Y,$]=(0,i.useState)(),[ee,ea]=(0,i.useState)(),[et,en]=(0,i.useState)("Choose File..."),[ei,es]=(0,i.useState)("Choose File..."),[ed,el]=(0,i.useState)("Choose File..."),[ec,eo]=(0,i.useState)({id:"",tag_number:"",old_number:"",name:"",asset_category_id:"",trademark:"",merek_barang:"",model:"",color:"",serial_number:"",part_number:"",anggaran_id:"",qty:"",invoice_number:"",value:"",lifetime:"",year:"",location_id:"",unit_id:"",uselife:"",type:"",vendor_id:"",status_id:"",branch_id:"",remark:"",picture:"",no_barang:"",flag:"",asset_type_id:"",code_activa_id:"",ownership_id:"",file_name_satu:"",file_description_satu:"",file_name_dua:"",file_description_dua:"",file_name_tiga:"",file_description_tiga:"",tgl_perolehan:"",payment_voucher:"",harga_perolehan:"",currency_perolehan:""}),er=async()=>{await h.Z.get("api/list-master").then(e=>{t({...a,dataDepartement:e.data.vendorList}),k({...b,dataStatus:e.data.statusList}),y({..._,dataLocation:e.data.location}),S({...f,dataBranch:e.data.branchList}),x({...v,dataAssetType:e.data.assetType}),D({...A,dataCodeActiva:e.data.codeActiva}),P({...w,dataOwnership:e.data.ownership}),C({...j,dataAnggaran:e.data.anggaran})})},eu=e=>{let a={...ec};a[e.target.id]=e.target.value,eo(a)},em=(e,a)=>{eo({...ec,uselife:a})},ep=(e,a)=>{eo({...ec,tgl_perolehan:a})},eh=e=>{let{target:{value:a}}=e;eo({...ec,remark:a})},eg=e=>{let{target:{value:a}}=e;eo({...ec,file_description_satu:a})},e_=e=>{let{target:{value:a}}=e;eo({...ec,file_description_dua:a})},ey=e=>{let{target:{value:a}}=e;eo({...ec,file_description_tiga:a})},ef=()=>{let e=document.getElementById("select-image");e.click()},eS=()=>{let e=document.getElementById("select-image-2");e.click()},eb=e=>new Promise((a,t)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>a(n.result),n.onerror=e=>t(e)}),ek=e=>{X(!0),eb(e).then(a=>{let t="data:"+e.type+";base64,",n=a.replaceAll(t,"");void 0==G?eo({...ec,imageSatu:{name:e.name,path:a,type:t,base64:n}}):eo({...ec,imageSatu:{id:G,name:e.name,path:a,type:t,base64:n}}),B(a),R(!0),X(!1),setTimeout(()=>{document.getElementById("select-image").value=""},1e3)})},ev=e=>{z(!0),eb(e).then(a=>{let t="data:"+e.type+";base64,",n=a.replaceAll(t,"");void 0==M?eo({...ec,imageDua:{name:e.name,path:a,type:t,base64:n}}):eo({...ec,imageDua:{id:M,name:e.name,path:a,type:t,base64:n}}),K(a),I(!0),z(!1),setTimeout(()=>{document.getElementById("select-image-2").value=""},1e3)})},ex=async e=>{eb(e).then(a=>{let t=e.name,n="data:"+e.type+";base64,",i=a.replaceAll(n,""),s=e.type;en(t),void 0==V?eo({...ec,attachments1:{name:t,type:n,base64:i,mime:s}}):eo({...ec,attachments1:{id:V,name:t,type:n,base64:i,mime:s}})})},eA=async e=>{eb(e).then(a=>{let t=e.name,n="data:"+e.type+";base64,",i=a.replaceAll(n,""),s=e.type;es(t),void 0==Y?eo({...ec,attachments2:{name:t,type:n,base64:i,mime:s}}):eo({...ec,attachments2:{id:Y,name:t,type:n,base64:i,mime:s}})})},eD=async e=>{eb(e).then(a=>{let t=e.name,n="data:"+e.type+";base64,",i=a.replaceAll(n,""),s=e.type;el(t),void 0==ee?eo({...ec,attachments3:{name:t,type:n,base64:i,mime:s}}):eo({...ec,attachments3:{id:ee,name:t,type:n,base64:i,mime:s}})})},ej=async()=>{await h.Z.get("api/detail-update/"+e.query.id).then(e=>{eo(e.data),null!=e.data.attachments1&&(en(e.data.attachments1.name),W(e.data.attachments1.id)),null!=e.data.attachments2&&(es(e.data.attachments2.name),$(e.data.attachments2.id)),null!=e.data.attachments3&&(el(e.data.attachments3.name),ea(e.data.attachments3.id)),null!=e.data.imageSatu&&(J(e.data.imageSatu.id),B(e.data.imageSatu.ext+e.data.imageSatu.file),R(!0)),null!=e.data.imageDua&&(Q(e.data.imageDua.id),K(e.data.imageDua.ext+e.data.imageDua.file),I(!0))}).catch(a=>{"statusText"in a.response&&"message"in a.response.data&&(0,p.lt)(a.response.statusText,a.response.data.message),e.push("/audit")})},eC=()=>{let e=document.getElementById("attachments-1");e.click()},ew=()=>{let e=document.getElementById("attachments-2");e.click()},eP=()=>{let e=document.getElementById("attachments-3");e.click()},eT=async()=>{E(!0),await (0,h.Z)({method:"POST",url:"api/audit",data:ec}).then(a=>{(0,p.tA)(a.data.status,a.data.message),e.back()}).catch(e=>{"statusText"in e.response&&"message"in e.response.data&&(0,p.lt)(e.response.statusText,e.response.data.message),"errors"in e.response.data&&N(e.response.data.errors)}).finally(()=>{E(!1)})};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(p.HU,{title:"Edit Asset"}),(0,n.jsx)(r.Z,{span:24,children:(0,n.jsxs)(u.Z,{cover:(0,n.jsx)(r.Z,{span:24,style:{backgroundColor:"#1890ff",paddingTop:"5px"}}),children:[(0,n.jsx)(p.Xl,{}),(0,n.jsxs)(c.Z,{defaultActiveKey:"1",children:[(0,n.jsx)(g,{tab:"Data",children:(0,n.jsx)(p.lI,{forms:ec,handleChange:eu,listAssetType:v,onAssetType:function(e){eo({...ec,asset_type_id:e})},error:L,onBranch:function(e){eo({...ec,branch_id:e})},listBranch:f,onChangeDate:em,onLocation:function(e){eo({...ec,location_id:e})},listLocation:_,onDepartement:function(e){eo({...ec,vendor_id:e})},departement:a,onStatus:function(e){eo({...ec,status_id:e})},listStatus:b,onRemark:eh,listCodeActiva:A,onCodeActiva:function(e){eo({...ec,code_activa_id:e})},listOwnership:w,onOwnersip:function(e){eo({...ec,ownership_id:e})},onCurrency:function(e){eo({...ec,currency_perolehan:e})},onActiva:function(e){eo({...ec,status_activa:e})},listAnggaran:j,onAnggaran:function(e){eo({...ec,anggaran_id:e})},onFlag:function(e){eo({...ec,flag:e})},onChangeDatePerolehan:ep})},"1"),(0,n.jsx)(g,{tab:"Photos",children:(0,n.jsx)(p.pK,{image:O,handlePickImage:ef,imageUrl:F,loading:U,isImageDua:Z,handlePickImage2:eS,imageUrlDua:q,loadingDua:H,onPickImage:ek,onPickImage2:ev})},"2"),(0,n.jsx)(g,{tab:"Attachments",children:(0,n.jsx)(p.ar,{onPickFile1:ex,onPickFile2:eA,onPickFile3:eD,forms:ec,handleChange:eu,onDescriptionSatu:eg,onDescriptionDua:e_,onDescriptionTiga:ey,fileName1:et,fileName2:ei,fileName3:ed,handlePickFileSatu:eC,handlePickFileDua:ew,handlePickFileTiga:eP})},"3")]}),(0,n.jsx)(o.Z,{style:{float:"right"},gutter:5,children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(m.ZP,{icon:(0,n.jsx)(d.Z,{}),style:{backgroundColor:"#F0AD4E",color:"#fff",marginRight:15},onClick:()=>e.push("/asset"),disabled:T,children:"Cancel"}),(0,n.jsx)(m.ZP,{icon:(0,n.jsx)(l.Z,{}),type:"primary",onClick:()=>eT("api/audit",ec,N,E,e),children:"Save"})]})})]})})]})};a.default=_}},function(e){e.O(0,[7698,1577,9329,8571,1003,186,9774,2888,179],function(){return e(e.s=52370)}),_N_E=e.O()}]);